<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content=D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.02c91f0bdf54d569f6c715f0a345bf32b55cd4d3ac11e0b98fec7ad1e614c151.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/d.min.js></script><script>hljs.configure({languages:[]})
hljs.initHighlightingOnLoad();</script><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']],
        processEscapes: true
      }
    });
</script><title>#dlang DMD 2.079.0 Released【翻訳】 - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2018/03/dmd-2-079-0-released/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#dlang DMD 2.079.0 Released【翻訳】 - Kotet's Personal Blog"><meta name=og:description content=D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。><meta name=twitter:image content=https://blog.kotet.jp/img/common/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2018/03/dmd-2-079-0-released/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.55.2"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><span class=text-up>ABOUT</span><a href=/about title=about><svg width="22" height="22" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs/><g id="export" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="info" transform="translate(-1.000000, -1.000000)"><path id="placeholder" fill-opacity="0" fill="#fff" d="M0 0h24v24H0z"/><path d="M12 23C5.92486775 23 1 18.0751322 1 12 1 5.92486775 5.92486775 1 12 1 18.0751322 1 23 5.92486775 23 12 23 18.0751322 18.0751322 23 12 23zm0-2C16.9705627 21 21 16.9705627 21 12 21 7.02943725 16.9705627 3 12 3 7.02943725 3 3 7.02943725 3 12 3 16.9705627 7.02943725 21 12 21zM13.0036109 13.9983464H14.0029544v2h-4v-2h1v-2h-1V9.99834639h3.0006565V13.9983464zM12.0003283 8.99834639C11.4478622 8.99834639 11 8.55063114 11 7.99834639 11 7.44606164 11.4478622 6.99834639 12.0003283 6.99834639 12.5527943 6.99834639 13.0006565 7.44606164 13.0006565 7.99834639c0 .5522847500000001-.44786219999999943 1-1.0003282000000002 1z" id="Oval-17" fill="#000" fill-rule="nonzero"/></g></g></svg></a></li><li><span class=text-bottom>DOWNLOAD</span><a href=/products title=download><svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs/><g id="export" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="download" transform="translate(-2.000000, -2.000000)"><path id="placeholder" fill-opacity="0" fill="#fff" d="M0 0h24v24H0z"/><path d="M22 16v4C22 21.1045695 21.1045695 22 20 22H4C2.8954305 22 2 21.1045695 2 20V16H4v4H20V16h2zm-9-3.4142136L16.2928932 9.29289322 17.7071068 10.7071068 12 16.4142136 6.29289322 10.7071068 7.70710678 9.29289322 11 12.5857864V2h2V12.5857864z" id="Combined-Shape" fill="#000"/></g></g></svg></a></li><li><span class=text-up>TAG</span><a href=/tags title=tag><svg width="22" height="14" viewBox="0 0 22 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs/><g id="export" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="tag" transform="translate(-1.000000, -5.000000)"><path id="placeholder" fill-opacity="0" fill="#fff" d="M0 0h24v24H0z"/><path d="M6.53518376 5H21C22.1045695 5 23 5.8954305 23 7V17C23 18.1045695 22.1045695 19 21 19H6.53518376C5.86647738 19 5.24201473 18.6657977 4.87108317 18.1094004L1.16794971 12.5547002C.944016765 12.2188008.944016765 11.7811992 1.16794971 11.4452998L4.87108317 5.89059961C5.24201473 5.33420227 5.86647738 5 6.53518376 5zM3.20185043 12l3.33333333 5H21V7H6.53518376L3.20185043 12zM7 13C6.44771525 13 6 12.5522847 6 12 6 11.4477153 6.44771525 11 7 11 7.55228475 11 8 11.4477153 8 12 8 12.5522847 7.55228475 13 7 13z" id="Rectangle-29" fill="#000" fill-rule="nonzero"/></g></g></svg></a></li><li><span class=text-bottom>PODCAST</span><a href=https://podcast.kotet.jp title=podcast><svg width="22" height="20" viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs/><g id="export" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="broadcasting" transform="translate(-1.000000, -2.000000)"><path id="placeholder" fill-opacity="0" fill="#fff" d="M0 0h24v24H0z"/><path d="M9.38742589 20 8.72075922 22H6.61257411L9.89881747 12.1412699C9.34410225 11.5968755 9 10.8386225 9 10 9 8.34314575 10.3431458 7 12 7 13.6568542 7 15 8.34314575 15 10 15 10.8386225 14.6558977 11.5968755 14.1011825 12.1412699L17.3874259 22H15.2792408L14.6125741 20H9.38742589zM10.7207592 16 10.0540926 18H13.9459074L13.2792408 16H10.7207592zM11.3874259 14H12.6125741L12.2750928 12.987556C12.1844984 12.9957918 12.0927406 13 12 13 11.9072594 13 11.8155016 12.9957918 11.7249072 12.987556L11.3874259 14zM12 11C12.5522847 11 13 10.5522847 13 10 13 9.44771525 12.5522847 9 12 9 11.4477153 9 11 9.44771525 11 10 11 10.5522847 11.4477153 11 12 11zm8.108743-8.43301443C21.9041909 4.52460368 23 7.13433188 23 10 23 12.8656681 21.9041909 15.4753963 20.108743 17.4330144L18.6344261 16.0815573C20.103429 14.4798697 21 12.3446376 21 10 21 7.65536245 20.103429 5.52013028 18.6344261 3.91844274L20.108743 2.56698557zM17.1601092 5.26989991C18.302667 6.51565689 19 8.17639301 19 10 19 11.823607 18.302667 13.4843431 17.1601092 14.7301001L15.6857923 13.3786429C16.501905 12.4888165 17 11.3025764 17 10 17 8.69742358 16.501905 7.51118349 15.6857923 6.62135708L17.1601092 5.26989991zM3.89125699 2.56665655 5.3655739 3.91811372C3.89657104 5.51980126 3 7.65503343 3 9.99967098 3 12.3443085 3.89657104 14.4795407 5.3655739 16.0812282L3.89125699 17.4326854C2.09580905 15.4750673 1 12.8653391 1 9.99967098 1 7.13400286 2.09580905 4.52427466 3.89125699 2.56665655zM6.83989081 5.26957089 8.31420772 6.62102806C7.49809502 7.51085447 7 8.69709456 7 9.99967098 7 11.3022474 7.49809502 12.4884875 8.31420772 13.3783139L6.83989081 14.7297711C5.69733303 13.4840141 5 11.823278 5 9.99967098 5 8.17606399 5.69733303 6.51532787 6.83989081 5.26957089z" id="Combined-Shape" fill="#000" fill-rule="nonzero"/></g></g></svg></a></li><li><span class=text-up>FEED</span><a href=/index.xml title=feed><svg width="22" height="18" viewBox="6 8 .5 10" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs><path d="M1 21V19C2.1045695 19 3 19.8954305 3 21H1zm6 0H5C5 18.790861 3.209139 17 1 17V15C4.3137085 15 7 17.6862915 7 21zm4 0H9C9 16.581722 5.418278 13 1 13V11C6.5228475 11 11 15.4771525 11 21z" id="path-1"/></defs><g id="export" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="cast" transform="translate(-1.000000, -3.000000)"><path id="placeholder" fill-opacity="0" fill="#fff" d="M0 0h24v24H0z"/><mask id="mask-2" fill="#fff"><use xlink:href="#path-1"/></mask><use id="Combined-Shape" fill="#000" fill-rule="nonzero" xlink:href="#path-1"/></g></g></svg></a></li></ul></nav><h1><a href=/>KOTET'S<br>PERSONAL<br>BLOG</a></h1></header><main><header><h2><a href=/tags/dlang>#dlang</a>
DMD 2.079.0 Released【翻訳】</h2><p><time>2018-03-05</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/d_blog>#d_blog</a></p><div style="border:.5em solid gold;padding:1em;margin-bottom:1em"><p style=font-weight:700;margin:0>これは1年以上前の記事です</p><p style=margin:0>ここに書かれている情報、見解は現在のものとは異なっている場合があります。</p></div><aside><p>Table of Contents</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#visual-studioが不要に>Visual Studioが不要に</a></li><li><a href=#自動コンパイルされるインポート>自動コンパイルされるインポート</a></li><li><a href=#dbugfix-キャンペーン>#dbugfix キャンペーン</a></li></ul></li></ul></li></ul></nav></aside></header><article><p>この記事は、
<a href=https://dlang.org/blog/2018/03/03/dmd-2-079-0-released/>DMD 2.079.0 Released – The D Blog</a>
を自分用に翻訳したものを
<a href=http://dlang.org/blog/2017/06/16/life-in-the-fast-lane/#comment-1631>許可を得て</a>
公開するものである。</p><p>ソース中にコメントの形で原文を残している。
誤字や誤訳などを見つけたら今すぐ
<a href=https://github.com/kotet/blog.kotet.jp>Pull request</a>だ!</p><hr><p>D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。
この最新版は複数のパッケージで<a href=https://dlang.org/download.html>ダウンロードできます</a>。
<a href=https://dlang.org/changelog/2.079.0.html>チェンジログ</a>でこのリリースの<a href=https://dlang.org/changelog/2.079.0.html#contributors>78人のコントリビュータによる</a>
変更とバグフィックスを見ることができます。</p><p>リリースの中のどの改善をこのブログで取り上げるか選ぶ作業はいつだって簡単ではありません。
誰かにとって重要なことが他の誰かにとっては関心のないことだったりします。
今回、特にどれを選ぶか悩みました。
しかし、Dプログラミング言語の、特に初心者のエクスペリエンスに大きな影響をもたらすポテンシャルを持つ、特に目立つ2つを紹介します。</p><h3 id=visual-studioが不要に>Visual Studioが不要に</h3><p>チェンジログでは<a href=https://dlang.org/changelog/2.079.0.html#lld_mingw>小さな1エントリ</a>でしかありませんが、これはWindowsにおけるDでのプログラミングにとって大きな変更です。
64ビット実行ファイルをリンクするのにもはやMicrosoftツールチェインは必要ありません。
<a href=/2018/01/dmd-2-078-0-has-been-released>前回のリリース</a><sup class=footnote-ref id=fnref:1><a href=#fn:1>1</a></sup>
ではコンパイラの設定を不要にすることで作業が簡単になりました。
コマンドラインに<code>-m32mscoff</code>または<code>-m64</code>が渡された場合、Visual StudioやMicrosoft Build Toolsがインストールされていないか検索します。
このリリースではそこからさらに改善されました。</p><p>WindowsのDMDはVC 2010 C ランタイムのラッパライブラリであるMinGWからビルドされたプラットフォームライブラリとセットで配布されるようになりました
(チェンジログはインストーラについてしか言及していませんが、zipパッケージにもバンドルされています)。
<code>-m32mscoff</code>や<code>-m64</code>フラグが与えられ、コンパイラがWindows SDKのインストール
(最新版のVisual Studioでは一緒にインストールされます。古いバージョンでは別にインストールが必要です)
を検出できなかったとき、これらのライブラリにフォールバックします。
更に、コンパイラは<code>lld</code>、LLVMのリンカも合わせて公開されます。
MSのリンカが見つからなければ、かわりにこれが使われます(ただし、現在はこのリンカの使用は実験的なものです)。</p><p>というわけで、64ビットと32ビット COFFの出力はOMFの出力(<code>-m32</code>、デフォルトです)を持つためWindowsにおいて「箱から出してすぐ使える」ようになりました。
これによってWindowsにおいて、めんどくさいVisual Studioのインストールと設定が必要なCやC++のバックグラウンド無しでDを始めるのが簡単になりました。</p><h3 id=自動コンパイルされるインポート>自動コンパイルされるインポート</h3><p>Dの初心者、特にJavaをバックグラウンドに持つ人におけるもう一つの変化が、インポートの扱い方です。
由緒正しい‘Hello World’を例に考えてみましょう:</p><pre><code class=language-d>import std.stdio;

void main() {
    writeln(&quot;Hello, World!&quot;);
}
</code></pre><p>インポートしたモジュールが自動的にコンパイルされる言語から初めてDに来た人は、ここで起きていることを前提として受け入れます。
もちろん、それは間違っています。
<code>std.stdio</code>モジュールは<a href=https://dlang.org/phobos/index.html>Phobos、Dの標準ライブラリ</a>の一部であり、プリコンパイルされたライブラリとしてコンパイラと一緒に配布されるものです。
実行ファイルや共有ライブラリをコンパイルするとき、コンパイラはそれをリンカに生成されたオブジェクトファイルとともに渡します。</p><p>新人が驚くのは以下のように複数のファイルをコンパイルしようとしたときです:</p><pre><code class=language-d>// hellolib.d
module hellolib;
import std.stdio;

void sayHello() {
    writeln(&quot;Hello!&quot;);
}

// hello.d
import hellolib;

void main() {
    sayHello();
}
</code></pre><p>一般的な間違いとして以下のようなことが行われ、結果としてリンカは<code>sayHello</code>シンボルの不足をエラーとして報告します:</p><pre><code>dmd hello.d
</code></pre><p>Dコンパイラはインポートされたモジュールについて考えません。
コマンドラインで渡されたソースファイルのみがコンパイルされます。
つまり上のものを正しくコンパイルするにはこのようにします:</p><pre><code>dmd hello.d hellolib.d
</code></pre><p><code>import</code>文がコンパイラに伝えるのはシンボルが現在のコンパイルユニットから見えてアクセスできるということであり、ソースファイルをコンパイルしなければならないということは伝えません。
言い換えると、コンパイル中、コンパイラはインポートされたモジュールがすでにコンパイルされたものか、コンパイルしてほしいものなのかについて関知しないということです。
ユーザーは明示的にコンパイルしてほしいソースモジュールか、プリコンパイルされたオブジェクトまたはライブラリファイルを渡さなければなりません。</p><p>インポートされたモジュールのコンパイルのサポートは不可能ではありません。
それはリンクの段階の存在によって回避不能な問題を引き起こします。
たとえば、<code>libFoo</code>静的ライブラリをリンクするため、<code>libFoo</code>からインポートしたモジュールをコンパイルしたくないという場合です。
それはビルドツールの領域であり、それはビルドツールに任せるというのが哲学です。</p><p>DMD 2.079.0は<a href=https://dlang.org/changelog/2.079.0.html#includeimports>流れを一変させます</a>。
上の例は以下のようにコンパイル・リンクできます:</p><pre><code>dmd -i hello.d
</code></pre><p><code>-i</code>スイッチはインポートされたモジュールをコマンドラインに渡されたかのように扱うようコンパイラに指示します。
これはモジュールまたはパッケージ名を渡すことで指定のモジュールやパッケージに制限でき、同様にダッシュを先頭につけることで除外できます:</p><pre><code>dmd -i=foo -i=-foo.bar main.d
</code></pre><p>この場合、完全修飾名が<code>foo</code>で始まるモジュールが、<code>foo.bar</code>で始まるものを除きコンパイルされます。
デフォルトでは、<code>-i</code>はインポートされたモジュールのうちPhobosとDRuntime以外すべてをコンパイルします。
つまり:</p><pre><code>-i=-core -i=-std -i=-etc -i=-object
</code></pre><p>ビルドツールを完全に置き換えるものではありませんが、クイックテストや複雑な設定の必要ないプログラムが簡単にコンパイルできるようになります。</p><h3 id=dbugfix-キャンペーン>#dbugfix キャンペーン</h3><p>関連事項として、先月私は<a href=https://dlang.org/blog/2018/02/03/the-dbugfix-campaign/><strong>#dbugfix</strong> キャンペーン</a>をアナウンスしました。
簡単に言うと、修正してほしい<a href=https://issues.dlang.org/>D Bugzilla issue</a>があるなら、issue番号を<strong>#dbugfix</strong>をつけてツイートするか、
Twitterアカウントを持っていない、またはissueについて議論したい場合は<a href=https://forum.dlang.org/group/general>総合フォーラム</a>にissue番号と<strong>#dbugfix</strong>をタイトルに入れて投稿する、というものです。
コアチームはその後のコンパイラのリリースで、それらのissueのうち少なくとも2つを修正するためにコミットします。</p><p>通常、私はメジャーコンパイラリリースの2ヶ月前からデータを集めます。
最初は3ヶ月なれる期間を用意していました。
私はそれは流行るのにはおそすぎると予想しており、どうやら正しかったようです。
アナウンスの数日後少しissueがツイート・投稿され、その後静かになりました。
これまでのところ受け取っているものです:</p><ul><li><a href="https://issues.dlang.org/show_bug.cgi?id=1983">Issue #1983</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=2043">Issue #2043</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=5227">Issue #5227</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=16189">Issue #16189</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=17957">Issue #17957</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18068">Issue #18068</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18147">Issue #18147</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18353">Issue #18353</a></li></ul><p>DMD 2.080.0は<a href=http://dconf.org/2018/index.html>DConf 2018</a>が始まるころに予定されています。
考慮する締切日は2.080.0ベータがアナウンスされる頃です。
これによってバグ修正者がどれに取り掛かるか考える時間ができます。
私は集計と選ばれたissueをDMDのリリースのアナウンスメントに含め、バグ修正者は修正の実装に取り掛かり以降のリリース(できれば2.081.0)でPRをマージします。
2.080.0がリリースされると、<strong>#dbugfix</strong> issueをまた次のサイクルのために収集します。</p><p>上のリストにないけれど修正してほしいissueがあれば、<strong>#dbugfix</strong>に投稿してください!
また、<strong>#dbugfix</strong>issueをリツイートしたり、フォーラムで<strong>+1</strong>するのもいいでしょう。
それらは考慮されます。
そして、issue番号を含めるのも忘れないでください。
でないとカウントされません!</p><div class=footnotes><hr><ol><li id=fn:1>原文:<a href=https://dlang.org/blog/2018/01/dmd-2-078-0-has-been-released/>https://dlang.org/blog/2018/01/dmd-2-078-0-has-been-released/</a>
<a class=footnote-return href=#fnref:1><sup>[return]</sup></a></li></ol></div></article><footer><h2><a href=/tags/dlang>#dlang</a>
DMD 2.079.0 Released【翻訳】</h2><p><time>2018-03-05</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/d_blog>#d_blog</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>