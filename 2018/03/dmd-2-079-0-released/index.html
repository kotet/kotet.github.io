<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content=D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.a46209b7292a5337cb1ba441dd38238fbe3cc498d46e0bd08c757deccdc8f28f.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/d.min.js></script><script>hljs.configure({languages:[]})
hljs.initHighlightingOnLoad();</script><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']],
        processEscapes: true
      }
    });
</script><title>#dlang DMD 2.079.0 Released【翻訳】 - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2018/03/dmd-2-079-0-released/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#dlang DMD 2.079.0 Released【翻訳】 - Kotet's Personal Blog"><meta name=og:description content=D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。><meta name=twitter:image content=https://blog.kotet.jp/img/common/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2018/03/dmd-2-079-0-released/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.54.0"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><a href=/about>ABOUT</a></li><li><a href=/products>PRODUCTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/index.xml>FEED</a></li></ul></nav><h1><a href=/>KOTET'S<br>PERSONAL<br>BLOG</a></h1></header><main><header><h2><a href=/tags/dlang>#dlang</a>
DMD 2.079.0 Released【翻訳】</h2><p><time>2018-03-05</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/d_blog>#d_blog</a></p><aside><p>Table of Contents</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#visual-studioが不要に>Visual Studioが不要に</a></li><li><a href=#自動コンパイルされるインポート>自動コンパイルされるインポート</a></li><li><a href=#dbugfix-キャンペーン>#dbugfix キャンペーン</a></li></ul></li></ul></li></ul></nav></aside></header><article><p>この記事は、
<a href=https://dlang.org/blog/2018/03/03/dmd-2-079-0-released/>DMD 2.079.0 Released – The D Blog</a>
を自分用に翻訳したものを
<a href=http://dlang.org/blog/2017/06/16/life-in-the-fast-lane/#comment-1631>許可を得て</a>
公開するものである。</p><p>ソース中にコメントの形で原文を残している。
誤字や誤訳などを見つけたら今すぐ
<a href=https://github.com/kotet/blog.kotet.jp>Pull request</a>だ!</p><hr><p>D言語財団はDプログラミング言語のリファレンスコンパイラ、DMDのバージョン2.079.0をアナウンスします。
この最新版は複数のパッケージで<a href=https://dlang.org/download.html>ダウンロードできます</a>。
<a href=https://dlang.org/changelog/2.079.0.html>チェンジログ</a>でこのリリースの<a href=https://dlang.org/changelog/2.079.0.html#contributors>78人のコントリビュータによる</a>
変更とバグフィックスを見ることができます。</p><p>リリースの中のどの改善をこのブログで取り上げるか選ぶ作業はいつだって簡単ではありません。
誰かにとって重要なことが他の誰かにとっては関心のないことだったりします。
今回、特にどれを選ぶか悩みました。
しかし、Dプログラミング言語の、特に初心者のエクスペリエンスに大きな影響をもたらすポテンシャルを持つ、特に目立つ2つを紹介します。</p><h3 id=visual-studioが不要に>Visual Studioが不要に</h3><p>チェンジログでは<a href=https://dlang.org/changelog/2.079.0.html#lld_mingw>小さな1エントリ</a>でしかありませんが、これはWindowsにおけるDでのプログラミングにとって大きな変更です。
64ビット実行ファイルをリンクするのにもはやMicrosoftツールチェインは必要ありません。
<a href=/2018/01/dmd-2-078-0-has-been-released>前回のリリース</a><sup class=footnote-ref id=fnref:1><a href=#fn:1>1</a></sup>
ではコンパイラの設定を不要にすることで作業が簡単になりました。
コマンドラインに<code>-m32mscoff</code>または<code>-m64</code>が渡された場合、Visual StudioやMicrosoft Build Toolsがインストールされていないか検索します。
このリリースではそこからさらに改善されました。</p><p>WindowsのDMDはVC 2010 C ランタイムのラッパライブラリであるMinGWからビルドされたプラットフォームライブラリとセットで配布されるようになりました
(チェンジログはインストーラについてしか言及していませんが、zipパッケージにもバンドルされています)。
<code>-m32mscoff</code>や<code>-m64</code>フラグが与えられ、コンパイラがWindows SDKのインストール
(最新版のVisual Studioでは一緒にインストールされます。古いバージョンでは別にインストールが必要です)
を検出できなかったとき、これらのライブラリにフォールバックします。
更に、コンパイラは<code>lld</code>、LLVMのリンカも合わせて公開されます。
MSのリンカが見つからなければ、かわりにこれが使われます(ただし、現在はこのリンカの使用は実験的なものです)。</p><p>というわけで、64ビットと32ビット COFFの出力はOMFの出力(<code>-m32</code>、デフォルトです)を持つためWindowsにおいて「箱から出してすぐ使える」ようになりました。
これによってWindowsにおいて、めんどくさいVisual Studioのインストールと設定が必要なCやC++のバックグラウンド無しでDを始めるのが簡単になりました。</p><h3 id=自動コンパイルされるインポート>自動コンパイルされるインポート</h3><p>Dの初心者、特にJavaをバックグラウンドに持つ人におけるもう一つの変化が、インポートの扱い方です。
由緒正しい‘Hello World’を例に考えてみましょう:</p><pre><code class=language-d>import std.stdio;

void main() {
    writeln(&quot;Hello, World!&quot;);
}
</code></pre><p>インポートしたモジュールが自動的にコンパイルされる言語から初めてDに来た人は、ここで起きていることを前提として受け入れます。
もちろん、それは間違っています。
<code>std.stdio</code>モジュールは<a href=https://dlang.org/phobos/index.html>Phobos、Dの標準ライブラリ</a>の一部であり、プリコンパイルされたライブラリとしてコンパイラと一緒に配布されるものです。
実行ファイルや共有ライブラリをコンパイルするとき、コンパイラはそれをリンカに生成されたオブジェクトファイルとともに渡します。</p><p>新人が驚くのは以下のように複数のファイルをコンパイルしようとしたときです:</p><pre><code class=language-d>// hellolib.d
module hellolib;
import std.stdio;

void sayHello() {
    writeln(&quot;Hello!&quot;);
}

// hello.d
import hellolib;

void main() {
    sayHello();
}
</code></pre><p>一般的な間違いとして以下のようなことが行われ、結果としてリンカは<code>sayHello</code>シンボルの不足をエラーとして報告します:</p><pre><code>dmd hello.d
</code></pre><p>Dコンパイラはインポートされたモジュールについて考えません。
コマンドラインで渡されたソースファイルのみがコンパイルされます。
つまり上のものを正しくコンパイルするにはこのようにします:</p><pre><code>dmd hello.d hellolib.d
</code></pre><p><code>import</code>文がコンパイラに伝えるのはシンボルが現在のコンパイルユニットから見えてアクセスできるということであり、ソースファイルをコンパイルしなければならないということは伝えません。
言い換えると、コンパイル中、コンパイラはインポートされたモジュールがすでにコンパイルされたものか、コンパイルしてほしいものなのかについて関知しないということです。
ユーザーは明示的にコンパイルしてほしいソースモジュールか、プリコンパイルされたオブジェクトまたはライブラリファイルを渡さなければなりません。</p><p>インポートされたモジュールのコンパイルのサポートは不可能ではありません。
それはリンクの段階の存在によって回避不能な問題を引き起こします。
たとえば、<code>libFoo</code>静的ライブラリをリンクするため、<code>libFoo</code>からインポートしたモジュールをコンパイルしたくないという場合です。
それはビルドツールの領域であり、それはビルドツールに任せるというのが哲学です。</p><p>DMD 2.079.0は<a href=https://dlang.org/changelog/2.079.0.html#includeimports>流れを一変させます</a>。
上の例は以下のようにコンパイル・リンクできます:</p><pre><code>dmd -i hello.d
</code></pre><p><code>-i</code>スイッチはインポートされたモジュールをコマンドラインに渡されたかのように扱うようコンパイラに指示します。
これはモジュールまたはパッケージ名を渡すことで指定のモジュールやパッケージに制限でき、同様にダッシュを先頭につけることで除外できます:</p><pre><code>dmd -i=foo -i=-foo.bar main.d
</code></pre><p>この場合、完全修飾名が<code>foo</code>で始まるモジュールが、<code>foo.bar</code>で始まるものを除きコンパイルされます。
デフォルトでは、<code>-i</code>はインポートされたモジュールのうちPhobosとDRuntime以外すべてをコンパイルします。
つまり:</p><pre><code>-i=-core -i=-std -i=-etc -i=-object
</code></pre><p>ビルドツールを完全に置き換えるものではありませんが、クイックテストや複雑な設定の必要ないプログラムが簡単にコンパイルできるようになります。</p><h3 id=dbugfix-キャンペーン>#dbugfix キャンペーン</h3><p>関連事項として、先月私は<a href=https://dlang.org/blog/2018/02/03/the-dbugfix-campaign/><strong>#dbugfix</strong> キャンペーン</a>をアナウンスしました。
簡単に言うと、修正してほしい<a href=https://issues.dlang.org/>D Bugzilla issue</a>があるなら、issue番号を<strong>#dbugfix</strong>をつけてツイートするか、
Twitterアカウントを持っていない、またはissueについて議論したい場合は<a href=https://forum.dlang.org/group/general>総合フォーラム</a>にissue番号と<strong>#dbugfix</strong>をタイトルに入れて投稿する、というものです。
コアチームはその後のコンパイラのリリースで、それらのissueのうち少なくとも2つを修正するためにコミットします。</p><p>通常、私はメジャーコンパイラリリースの2ヶ月前からデータを集めます。
最初は3ヶ月なれる期間を用意していました。
私はそれは流行るのにはおそすぎると予想しており、どうやら正しかったようです。
アナウンスの数日後少しissueがツイート・投稿され、その後静かになりました。
これまでのところ受け取っているものです:</p><ul><li><a href="https://issues.dlang.org/show_bug.cgi?id=1983">Issue #1983</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=2043">Issue #2043</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=5227">Issue #5227</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=16189">Issue #16189</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=17957">Issue #17957</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18068">Issue #18068</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18147">Issue #18147</a></li><li><a href="https://issues.dlang.org/show_bug.cgi?id=18353">Issue #18353</a></li></ul><p>DMD 2.080.0は<a href=http://dconf.org/2018/index.html>DConf 2018</a>が始まるころに予定されています。
考慮する締切日は2.080.0ベータがアナウンスされる頃です。
これによってバグ修正者がどれに取り掛かるか考える時間ができます。
私は集計と選ばれたissueをDMDのリリースのアナウンスメントに含め、バグ修正者は修正の実装に取り掛かり以降のリリース(できれば2.081.0)でPRをマージします。
2.080.0がリリースされると、<strong>#dbugfix</strong> issueをまた次のサイクルのために収集します。</p><p>上のリストにないけれど修正してほしいissueがあれば、<strong>#dbugfix</strong>に投稿してください!
また、<strong>#dbugfix</strong>issueをリツイートしたり、フォーラムで<strong>+1</strong>するのもいいでしょう。
それらは考慮されます。
そして、issue番号を含めるのも忘れないでください。
でないとカウントされません!</p><div class=footnotes><hr><ol><li id=fn:1>原文:<a href=https://dlang.org/blog/2018/01/dmd-2-078-0-has-been-released/>https://dlang.org/blog/2018/01/dmd-2-078-0-has-been-released/</a>
<a class=footnote-return href=#fnref:1><sup>[return]</sup></a></li></ol></div></article><footer><h2><a href=/tags/dlang>#dlang</a>
DMD 2.079.0 Released【翻訳】</h2><p><time>2018-03-05</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/d_blog>#d_blog</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>