<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content=今まで前回、次回の記事に手動でリンクを貼っていたが、記事を投稿するたびに複数のファイルを編集しなければならないのがめんどくさいのでやめる。><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.c9d013014574db8d6be4e1768e32dd541f3431f611fecfcb824fed9a19b8fdd3.css><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$'], ['\[','\]']],
        processEscapes: true
      }
    });
</script><title>#ipfs体験記 11:IPFSによる分散型SoundCloud - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2017/12/ipfs-soundcloud/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#ipfs体験記 11:IPFSによる分散型SoundCloud - Kotet's Personal Blog"><meta name=og:description content=今まで前回、次回の記事に手動でリンクを貼っていたが、記事を投稿するたびに複数のファイルを編集しなければならないのがめんどくさいのでやめる。><meta name=twitter:image content=https://blog.kotet.jp/assets/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2017/12/ipfs-soundcloud/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.48"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><a href=/about>ABOUT</a></li><li><a href=/products>PRODUCTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/index.xml>FEED</a></li></ul></nav><h1><a href=/>KOTET'S PERSONAL BLOG</a></h1></header><main><header><h2><a href=/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98>#ipfs体験記</a>
11:IPFSによる分散型SoundCloud</h2><p><time>2017-12-20</time>
<a href=/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98>#ipfs体験記</a> <a href=/tags/ipfs>#ipfs</a> <a href=/tags/tech>#tech</a></p><aside><p>Table of Contents</p></aside></header><article><p>今まで前回、次回の記事に手動でリンクを貼っていたが、記事を投稿するたびに複数のファイルを編集しなければならないのがめんどくさいのでやめる。
<a href=/tags/#ipfs体験記>ipfs体験記</a>というタグを作ったのでそこから記事一覧にアクセスできる。
今までタグに日本語を使うのを避けていたが、やってみたら意外と問題が起きなかった。</p><p>追記: どうもシーダーがいなくなってアクセスできなくなってしまった様子のリソースがいくつかあるが、そのままにしておく。</p><p>SoundCloud的ウェブサイトがあった。</p><ul><li><a href=https://dsound.audio/#/feed>DSound - Decentralized Sound Platform</a></li></ul><p>以下は作者の書いた記事である。</p><ul><li><a href=https://steemit.com/music/@prc/introducing-dsound-a-decentralized-sound-platform-using-steem-and-ipfs>Introducing DSound: a decentralized sound platform using STEEM and IPFS — Steemit</a></li><li><a href=https://steemit.com/music/@prc/dsound-the-launch-what-s-new-now-that-the-1st-alpha-is-closed-and-the-full-decentralization-of-it>DSound: The launch, what&rsquo;s new now that the 1st alpha is closed and the FULL decentralization of it — Steemit</a></li></ul><p>音声などのデータをIPFS上に保存しており、たとえば
<a href=https://gateway.ipfsstore.it:8443/ipfs/QmQV535FtqctNyKb82Qh5XUbdh2bdmjyzS5AHcwEPWTaJS>https://gateway.ipfsstore.it:8443/ipfs/QmQV535FtqctNyKb82Qh5XUbdh2bdmjyzS5AHcwEPWTaJS</a>
のように内部でパブリックゲートウェイを使ってアクセスしている。
<a href=/2017/10/ipfs-browser-extention>以前紹介したブラウザ拡張</a>
を有効にした状態で閲覧するとこのURLがローカルゲートウェイのものに書き換えられ、自分のIPFSノードからダウンロードされるようになる。
または、ログインするとローカルゲートウェイを使うよう設定できるらしい。
するとIPFSの効果により負荷が分散されるというわけだ。</p><p><code>ipfs bitswap wantlist</code>を見ていると再生ボタンを押したあとにwantlistにハッシュが大量に追加されるのを見ることができる。
wantlistはソートされておらず実行するたびに順番が違うので、<code>watch</code>などで監視する場合は<code>sort</code>する必要があるので注意しよう。</p><p>しかし自分の環境だと1回目は途中でダウンロードが止まってしまうことがある。
止まってしまってからページをリロードして、もう一度再生するとちゃんとwantlistがすべて消化される。
これはこのサイトのバグだろうか、<code>go-ipfs</code>のバグだろうか、それとも単に自分とデータ保持者の回線の問題だろうか?</p><p>コンテンツが完全に分散されているので、アクセスする人が多くてもローカルゲートウェイを使っており、シーダーが十分に多いなら管理者の負担にはならない。
なので、通常なら禁止されがちのファイルへの直リンクが上記の記事では逆に紹介されている。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>video</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://ipfs.io/ipfs/QmQAJq3xfPhekc8zph3KjssjYUBLBT3jnMAPHzJU1X9ELz&#34;</span> <span style=color:#a6e22e>poster</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://ipfs.io/ipfs/Qme9AJ61nQJezRej79BZTxvT5uXuUzLTiFGH5kWewCJYLR&#34;</span> <span style=color:#a6e22e>controls</span>&gt;&lt;/<span style=color:#f92672>video</span>&gt;
&lt;<span style=color:#f92672>audio</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://ipfs.io/ipfs/QmQAJq3xfPhekc8zph3KjssjYUBLBT3jnMAPHzJU1X9ELz&#34;</span> <span style=color:#a6e22e>controls</span>&gt;&lt;/<span style=color:#f92672>audio</span>&gt;</code></pre></div><p><div id=videoandaudio></div><script>let div=document.querySelector(&ldquo;#videoandaudio&rdquo;);let v=document.createElement(&ldquo;video&rdquo;);v.src=&lsquo;<a href="https://ipfs.io/ipfs/QmQAJq3xfPhekc8zph3KjssjYUBLBT3jnMAPHzJU1X9ELz'">https:v.poster=&lsquo;<a href="https://ipfs.io/ipfs/Qme9AJ61nQJezRej79BZTxvT5uXuUzLTiFGH5kWewCJYLR'">https:v.controls=&ldquo;controls&rdquo;;v.style=&lsquo;width:100%;&lsquo;;div.appendChild(v);let a=document.createElement(&ldquo;audio&rdquo;);a.src=&lsquo;<a href="https://ipfs.io/ipfs/QmQAJq3xfPhekc8zph3KjssjYUBLBT3jnMAPHzJU1X9ELz'">https:a.controls=&ldquo;controls&rdquo;;a.style=&lsquo;width:100%;&lsquo;;div.appendChild(a);</script></p><p>分散されているのはデータだけかと最初思ったが、どうやら完全に分散型のサービスらしい。
データベースに<a href=https://steem.io/>Steem</a>というものを使っているらしいが、Steemについての知識がゼロのためどれくらい分散されているのかわからない。</p><p>なかなか実用的で素晴らしいと思う。
あとはブラウザやスマホで動くIPFSノードがあれば……</p></article><footer><h2><a href=/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98>#ipfs体験記</a>
11:IPFSによる分散型SoundCloud</h2><p><time>2017-12-20</time>
<a href=/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98>#ipfs体験記</a> <a href=/tags/ipfs>#ipfs</a> <a href=/tags/tech>#tech</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>