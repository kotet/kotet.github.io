<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>#ipfs体験記 13:非中央集権型ウェブ魚拓 - Kotet&#39;s Personal Blog </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/main.css" />
    <link rel="canonical" href="https://blog.kotet.jp/2017/12/ipfs-archive/" />
    <script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-88180620-1');
    </script>
    <link rel="icon" href="/favicon.ico">
    <meta name="twitter:card" content="summary" />
<meta name="og:title" content="#ipfs体験記 13:非中央集権型ウェブ魚拓 - Kotet&#39;s Personal Blog" />
<meta name="og:description" content=" IPFSでウェブページのアーカイブをするツールが複数存在する。 アーカイブのIPFSハッシュが公開されていれば、それを保持してくれているノードがいるかぎり誰にも削除できない。 今回は簡単に魚拓やスクショを公開するツールを紹介していく。  " />

<meta name="twitter:url" content="https://blog.kotet.jp/2017/12/ipfs-archive/" />
<meta name="twitter:site" content="@kotetttt" />
<meta name="twitter:creator" content="@kotetttt" />
    <meta name="generator" content="Hugo 0.49-DEV" />
    
<meta name="description" content=" IPFSでウェブページのアーカイブをするツールが複数存在する。 アーカイブのIPFSハッシュが公開されていれば、それを保持してくれているノードがいるかぎり誰にも削除できない。 今回は簡単に魚拓やスクショを公開するツールを紹介していく。 ">
<style>
    main {
        width: 800px;
        max-width: 100%;
        margin: 0 auto;
    }

    main > header {
        margin: 1em;
    }

    main > article {
        margin: 1em;
    }

    #TableOfContents>ul {
         
        padding: 0;
    }

    #TableOfContents>ul>li>ul {
         
        padding: 0;
    }

    #TableOfContents li {
        list-style: none;
    }

    #TableOfContents>ul>li>ul>li>ul li {
        list-style-type: initial;
    }

    aside {
        padding: .5em 1em;
        background: #EEE;
    }
</style>
<script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

</head>

<body>
    <header class="site">
        <h1><a href="/">Kotet&#39;s Personal Blog</a></h1>
        <nav>
            <ul>
                <li><a href="/about">ABOUT</a></li>
                <li><a href="/products">PRODUCTS</a></li>
                <li><a href="/tags">TAGS</a></li>
                <li><a href="/index.xml">FEED</a></li>
                
            </ul>
        </nav>
    </header>
    <main>
        
<header>
    <h2>
        
        <a href="/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98">#ipfs体験記</a>
        
        13:非中央集権型ウェブ魚拓
    </h2>
    <p>
        <time>2017-12-28</time>
         <a href="/tags/ipfs%e4%bd%93%e9%a8%93%e8%a8%98">#ipfs体験記</a>  <a href="/tags/ipfs">#ipfs</a>  <a href="/tags/tech">#tech</a> 
    </p>
    <aside>
    <p>Table of Contents</p>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#ipfs-archive">ipfs-archive</a></li>
<li><a href="#ipfscrape">ipfscrape</a></li>
<li><a href="#http2ipfs-web">http2ipfs-web</a></li>
<li><a href="#ipfs-screencap">ipfs-screencap</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</aside>
</header>
<article>

<p>IPFSでウェブページのアーカイブをするツールが複数存在する。
アーカイブのIPFSハッシュが公開されていれば、それを保持してくれているノードがいるかぎり誰にも削除できない。
今回は簡単に魚拓やスクショを公開するツールを紹介していく。</p>

<h3 id="ipfs-archive">ipfs-archive</h3>

<p><a href="https://github.com/jirwin/ipfs-archive">jirwin/ipfs-archive: Use IPFS to archive a url.</a></p>

<p>IPFSノードがなくても動くWebバージョンもある。</p>

<p><a href="https://ipfs.archive.network/">ipfs archive network</a></p>

<p>こちらを使ってみた。
作ったアーカイブはどれくらいの期間保存されるのだろうか。
一定期間で消されるようならば自分でPinしなければならない。</p>

<p>リポジトリの<a href="https://github.com/jirwin/ipfs-archive/blob/master/README.md">README</a>で試した。
以降のIPFSハッシュは一応すべて自分のノードでPinしているが、今の所ずっと動いているわけではないので見られないかもしれない。</p>

<p><a href="https://gateway.archive.network/ipfs/QmULiZkkXXKtNu5vsLNJQG8sDRn4L6bbLzrKXNgNpKrxn8">/ipfs/QmULiZkkXXKtNu5vsLNJQG8sDRn4L6bbLzrKXNgNpKrxn8</a></p>

<h3 id="ipfscrape">ipfscrape</h3>

<p><a href="https://github.com/victorbjelkholm/ipfscrape">VictorBjelkholm/ipfscrape: Scrape pages and store them in IPFS</a></p>

<p>PRが2年ほど放置されたりしている。
すごく小さなシェルスクリプトで、ipfsがコンピュータにインストールされている必要がある。
現在のgo-ipfsでも動作した。
実行するとアーカイブを生成し、IPFSにアップロードし、自動的にPinされる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ ./run.sh https://github.com/VictorBjelkholm/ipfscrape/blob/master/readme.md

Dumping &#34;https://github.com/VictorBjelkholm/ipfscrape/blob/master/readme.md&#34; into IPFS

readme.md.html                            [ &lt;=&gt;                                                                   ]  11.11K  --.-KB/s 時間 0.1s    
frameworks-1c2c316b7a17f15536c6a26ed7 100%[======================================================================&gt;]  23.34K  --.-KB/s 時間 0.02s   
github-8100b9bf1eb6ed8b38eaad2fe7ba51 100%[======================================================================&gt;]  92.80K  --.-KB/s 時間 0.02s   
...中略...
star-bg.svg                           100%[======================================================================&gt;]   3.95K  --.-KB/s 時間 0s      
site-signup-prompt.png                100%[======================================================================&gt;]  97.57K  --.-KB/s 時間 0.01s   
Moving readme.md.html to index.html

###############
## DUMP COMPLETE
##
## Urls:
## http://localhost:8080/ipfs/QmZDKaqySW8URZ36i7x8sK8d2VkQwuGvSx3N4GVXNHBTpW
## https://ipfs.io/ipfs/QmZDKaqySW8URZ36i7x8sK8d2VkQwuGvSx3N4GVXNHBTpW</code></pre></div>
<p><a href="https://ipfs.io/ipfs/QmZDKaqySW8URZ36i7x8sK8d2VkQwuGvSx3N4GVXNHBTpW">/ipfs/QmZDKaqySW8URZ36i7x8sK8d2VkQwuGvSx3N4GVXNHBTpW</a></p>

<p>ipfs-archiveでGitHubをアーカイブするとNet neutralityについてのバナーが出ているが、こっちではそういうことはない。
アーカイブを作成する場所の問題だろう。
このように場所によって見え方が違うサイトをアーカイブするならローカルでやるのが確実だろう。</p>

<h3 id="http2ipfs-web">http2ipfs-web</h3>

<p>以降は魚拓とはちょっと違うものである。</p>

<p><a href="https://github.com/jbenet/http2ipfs-web">jbenet/http2ipfs-web</a></p>

<p>これはURLを指定してIPFS上にファイルをアップロードするWebアプリケーションである。
ただしIPFSの、しかもWritableなApiサーバを用意する必要がある。
IPFSデーモンは起動時に指定しないとWritableにならなかったと思うので、ちょっと使うのがめんどくさい。</p>

<h3 id="ipfs-screencap">ipfs-screencap</h3>

<p><a href="https://github.com/jbenet/ipfs-screencap">jbenet/ipfs-screencap: Capture screenshots, publish them to IPFS, and copy the link to the clipboard.</a></p>

<p>スクショをダイレクトにIPFS上にアップロードするツール。
まずはインストールする。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ ipfs get /ipfs/QmQgQYuzYRGdhNtfpLRQmL5jJfoxPnSuTzgwUJGjwcDays/ipfs-screencap
$ cd ipfs-screencap
$ sh install.sh
$ sudo chmod +x /usr/local/bin/portable-screencap
$ sudo chmod +x /usr/local/bin/ipfs-screencap</code></pre></div>
<p>実行して画面の範囲を選択すると、スクリーンショットを取り、IPFSにアップロード、URLを出力する。
ディレクトリオブジェクトでラップされるのでファイル名がつく。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">$ ipfs-screencap -v
capturing screen... QmbD8tWjc5o5pBD5X3N1rv2ZrinWQTmg8sx1BPveHZbvvu
constructing dir... QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn
http://gateway.ipfs.io/ipfs/QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn/screencap.2017-12-28T13:53:30Z.png</code></pre></div>
<p><a href="https://ipfs.io/ipfs/QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn/screencap.2017-12-28T13:53:30Z.png">/ipfs/QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn/screencap.2017-12-28T13:53:30Z.png</a></p>

<p><img src="https://ipfs.io/ipfs/QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn/screencap.2017-12-28T13:53:30Z.png" alt="/ipfs/QmQjVSYec1rLTcMJfepPKYaCiBUtqYEy7tM7ZbReuYHyhn/screencap.2017-12-28T13:53:30Z.png" /></p>
</article>

        <div class="ad-wrapper"></div>
    </main>
    <footer class="site">
</footer>
</body>

</html>