<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>#dlang インストールスクリプトの使い方 - Kotet&#39;s Personal Blog </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="/main.css" />
    <link rel="canonical" href="https://blog.kotet.jp/2017/12/d-install-script/" />
    <script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-88180620-1');
    </script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8443812672116269",
        enable_page_level_ads: true
    });
    </script>
    <link rel="icon" href="/favicon.ico">
    <meta name="twitter:card" content="summary" />
<meta name="og:title" content="#dlang インストールスクリプトの使い方 - Kotet&#39;s Personal Blog" />
<meta name="og:description" content=" 今日は12月7日だが、空いていたのでD言語 Advent Calendar 2017 2日目に参加する。D言語のダウンロードページにあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。 ただ--helpを日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。  " />

<meta name="twitter:image" content="https://blog.kotet.jp/assets/logo.png" />

<meta name="twitter:url" content="https://blog.kotet.jp/2017/12/d-install-script/" />
<meta name="twitter:site" content="@kotetttt" />
<meta name="twitter:creator" content="@kotetttt" />
    <meta name="generator" content="Hugo 0.49-DEV" />
    
<meta name="description" content=" 今日は12月7日だが、空いていたのでD言語 Advent Calendar 2017 2日目に参加する。D言語のダウンロードページにあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。 ただ--helpを日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。 ">
<style>
    main {
        width: 800px;
        max-width: 100%;
        margin: 0 auto;
    }

    main > header {
        margin: 1em;
    }

    main > article {
        margin: 1em;
    }

    #TableOfContents>ul {
         
        padding: 0;
    }

    #TableOfContents>ul>li>ul {
         
        padding: 0;
    }

    #TableOfContents li {
        list-style: none;
    }

    #TableOfContents>ul>li>ul>li>ul li {
        list-style-type: initial;
    }

    aside {
        padding: .5em 1em;
        background: #EEE;
    }
</style>
<script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>

</head>

<body>
    <header class="site">
        <h1><a href="/">Kotet&#39;s Personal Blog</a></h1>
        <nav>
            <ul>
                <li><a href="/about">ABOUT</a></li>
                <li><a href="/products">PRODUCTS</a></li>
                <li><a href="/tags">TAGS</a></li>
                <li><a href="/index.xml">FEED</a></li>
                
            </ul>
        </nav>
    </header>
    <main>
        
<header>
    <h2>
        
        <a href="/tags/dlang">#dlang</a>
        
        インストールスクリプトの使い方
    </h2>
    <p>
        <time>2017-12-07</time>
         <a href="/tags/dlang">#dlang</a>  <a href="/tags/tech">#tech</a> 
    </p>
    <aside>
    <p>Table of Contents</p>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#はじめに">はじめに</a></li>
<li><a href="#ヘルプ">ヘルプ</a></li>
<li><a href="#インストール">インストール</a></li>
<li><a href="#リスト">リスト</a></li>
<li><a href="#アンインストール">アンインストール</a></li>
<li><a href="#アップデート">アップデート</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
</aside>
</header>
<article>

<p>今日は12月7日だが、空いていたので<a href="https://qiita.com/advent-calendar/2017/dlang">D言語 Advent Calendar 2017</a> 2日目に参加する。</p>

<p><a href="https://dlang.org/download.html">D言語のダウンロードページ</a>にあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。
ただ<code>--help</code>を日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。</p>

<h3 id="はじめに">はじめに</h3>

<p>ダウンロードページにも書かれているコマンドを実行する。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ curl -fsS https://dlang.org/install.sh | bash -s dmd
Downloading https://dlang.org/install.sh
######################################################################## 100.0%
Downloading https://dlang.org/d-keyring.gpg
######################################################################## 100.0%
The latest version of this script was installed as ~/dlang/install.sh.
It can be used it to install further D compilers.
Run `~/dlang/install.sh --help` for usage information.

Downloading and unpacking http://downloads.dlang.org/releases/2.x/2.077.1/dmd.2.077.1.linux.tar.xz
######################################################################## 100.0%
Downloading and unpacking http://code.dlang.org/files/dub-1.6.0-linux-x86_64.tar.gz
######################################################################## 100.0%

Run `source ~/dlang/dmd-2.077.1/activate` in your shell to use dmd-2.077.1.
This will setup PATH, LIBRARY_PATH, LD_LIBRARY_PATH, DMD, DC, and PS1.
Run `deactivate` later on to restore your environment.</code></pre></div>
<p>すると、dmd、dubの最新版と、インストールスクリプト<code>install.sh</code>が<code>~/dlang</code>にダウンロードされる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ls -l ~/dlang
合計 44
-rw-rw-r--  1 kotet kotet  9488 12月  7 15:33 d-keyring.gpg
drwx------ 11 kotet kotet  4096 12月  7 15:34 dmd-2.077.1
lrwxrwxrwx  1 kotet kotet     9 12月  7 15:34 dub -&gt; dub-1.6.0
drwx------  2 kotet kotet  4096 12月  7 15:34 dub-1.6.0
-rwxrwxr-x  1 kotet kotet 17443 12月  7 15:33 install.sh</code></pre></div>
<p>さきほど言われたとおり<code>source ~/dlang/dmd-2.077.1/activate</code>を実行すると、そのターミナルに限りDのコンパイラとdubが使えるようになる。
ターミナルを終了するか<code>deactivate</code>を実行すると元に戻る。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ source ~/dlang/dmd-2.077.1/activate
(dmd-2.077.1)~$ which dmd
/home/kotet/dlang/dmd-2.077.1/linux/bin64/dmd
(dmd-2.077.1)~$ which dub
/home/kotet/dlang/dub/dub
(dmd-2.077.1)~$ deactivate
~$ which dmd
~$ which dub</code></pre></div>
<h3 id="ヘルプ">ヘルプ</h3>

<p>ここから<code>~/dlang/install.sh</code>を使う。
<code>--help</code>で使い方がわかる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh --help
Usage

  install.sh [&lt;command&gt;] [&lt;args&gt;]

Commands

  install       Install a D compiler (default command)
  uninstall     Remove an installed D compiler
  list          List all installed D compilers
  update        Update this dlang script

Options

  -h --help     Show this help
  -p --path     Install location (default ~/dlang)
  -v --verbose  Verbose output

Run &#34;install.sh &lt;command&gt; --help to get help for a specific command.
If no argument are provided, the latest DMD compiler will be installed.</code></pre></div>
<h3 id="インストール">インストール</h3>

<p><code>install</code>コマンドで任意のバージョンのdmd/gdc/ldcをインストールできる。
さまざまなバージョン指定方法がある。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh install -h
Usage

  install.sh install &lt;compiler&gt;

Description

  Download and install a D compiler.
  By default the latest release of the DMD compiler is selected.

Options

  -a --activate     Only print the path to the activate script

Examples

  install.sh
  install.sh dmd
  install.sh install dmd
  install.sh install dmd-2.071.1
  install.sh install ldc-1.1.0-beta2

Compiler

  dmd|gdc|ldc           latest version of a compiler
  dmd|gdc|ldc-&lt;version&gt; specific version of a compiler (e.g. dmd-2.071.1, ldc-1.1.0-beta2)
  dmd|ldc-beta          latest beta version of a compiler
  dmd-nightly           latest dmd nightly
  dmd-2016-08-08        specific dmd nightly</code></pre></div>
<p><code>--path</code>で場所を指定しない場合<code>~/dlang</code>下に<code>~/dlang/dmd-2.077.1</code>のようにインストールされる。</p>

<p>適当に<code>dmd-2.074.1</code>をインストールしてみる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh install dmd-2.074.1
Downloading and unpacking http://downloads.dlang.org/releases/2.x/2.074.1/dmd.2.074.1.linux.tar.xz
######################################################################## 100.0%
dub-1.6.0 already installed

Run `source ~/dlang/dmd-2.074.1/activate` in your shell to use dmd-2.074.1.
This will setup PATH, LIBRARY_PATH, LD_LIBRARY_PATH, DMD, DC, and PS1.
Run `deactivate` later on to restore your environment.
~$ source ~/dlang/dmd-2.074.1/activate
(dmd-2.074.1)~$ which dmd
/home/kotet/dlang/dmd-2.074.1/linux/bin64/dmd
(dmd-2.074.1)~$ dmd --version
DMD64 D Compiler v2.074.1
Copyright (c) 1999-2017 by Digital Mars written by Walter Bright</code></pre></div>
<h3 id="リスト">リスト</h3>

<p><code>list</code>コマンドでインストール済みのコンパイラを一覧できる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh list
dmd-2.077.1
dmd-2.074.1</code></pre></div>
<h3 id="アンインストール">アンインストール</h3>

<p><code>uninstall</code>でアンインストールできる。
<code>~/dlang/&lt;コンパイラ名&gt;</code>を削除しているだけなので手動で<code>rm</code>してもいいと思う。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh uninstall dmd-2.074.1
Removing ~/dlang/dmd-2.074.1</code></pre></div>
<h3 id="アップデート">アップデート</h3>

<p><code>update</code>でスクリプト自身の更新ができる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-console" data-lang="console">~$ ~/dlang/install.sh update
Downloading https://dlang.org/install.sh
######################################################################## 100.0%
The latest version of this script was installed as ~/dlang/install.sh.
It can be used it to install further D compilers.
Run `~/dlang/install.sh --help` for usage information.</code></pre></div></article>

        <div class="ad-wrapper"></div>
    </main>
    <footer class="site">
</footer>
</body>

</html>