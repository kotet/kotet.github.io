<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="今日は12月7日だが、空いていたのでD言語 Advent Calendar 2017 2日目に参加する。D言語のダウンロードページにあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。 ただ--helpを日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。"><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.a3a5f142e959ac87355788d7b927889cb2cc8ce1e9d56b8fb03506a4406e4414.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/d.min.js></script><script>hljs.initHighlightingOnLoad();</script><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']],
        processEscapes: true
      }
    });
</script><title>#dlang インストールスクリプトの使い方 - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2017/12/d-install-script/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#dlang インストールスクリプトの使い方 - Kotet's Personal Blog"><meta name=og:description content="今日は12月7日だが、空いていたのでD言語 Advent Calendar 2017 2日目に参加する。D言語のダウンロードページにあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。 ただ--helpを日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。"><meta name=twitter:image content=https://blog.kotet.jp/assets/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2017/12/d-install-script/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.51"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><a href=/about>ABOUT</a></li><li><a href=/products>PRODUCTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/index.xml>FEED</a></li></ul></nav><h1><a href=/>KOTET'S PERSONAL BLOG</a></h1></header><main><header><h2><a href=/tags/dlang>#dlang</a>
インストールスクリプトの使い方</h2><p><time>2017-12-07</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a></p><aside><p>Table of Contents</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#はじめに>はじめに</a></li><li><a href=#ヘルプ>ヘルプ</a></li><li><a href=#インストール>インストール</a></li><li><a href=#リスト>リスト</a></li><li><a href=#アンインストール>アンインストール</a></li><li><a href=#アップデート>アップデート</a></li></ul></li></ul></li></ul></nav></aside></header><article><p>今日は12月7日だが、空いていたので<a href=https://qiita.com/advent-calendar/2017/dlang>D言語 Advent Calendar 2017</a> 2日目に参加する。</p><p><a href=https://dlang.org/download.html>D言語のダウンロードページ</a>にあるインストールスクリプトが、バージョン指定など思いの外多機能で便利だということに今更気がついた。
ただ<code>--help</code>を日本語化しただけではあるが、使い方と、実際に使った結果をまとめておく。</p><h3 id=はじめに>はじめに</h3><p>ダウンロードページにも書かれているコマンドを実行する。</p><pre><code class=language-console>~$ curl -fsS https://dlang.org/install.sh | bash -s dmd
Downloading https://dlang.org/install.sh
######################################################################## 100.0%
Downloading https://dlang.org/d-keyring.gpg
######################################################################## 100.0%
The latest version of this script was installed as ~/dlang/install.sh.
It can be used it to install further D compilers.
Run `~/dlang/install.sh --help` for usage information.

Downloading and unpacking http://downloads.dlang.org/releases/2.x/2.077.1/dmd.2.077.1.linux.tar.xz
######################################################################## 100.0%
Downloading and unpacking http://code.dlang.org/files/dub-1.6.0-linux-x86_64.tar.gz
######################################################################## 100.0%

Run `source ~/dlang/dmd-2.077.1/activate` in your shell to use dmd-2.077.1.
This will setup PATH, LIBRARY_PATH, LD_LIBRARY_PATH, DMD, DC, and PS1.
Run `deactivate` later on to restore your environment.
</code></pre><p>すると、dmd、dubの最新版と、インストールスクリプト<code>install.sh</code>が<code>~/dlang</code>にダウンロードされる。</p><pre><code class=language-console>~$ ls -l ~/dlang
合計 44
-rw-rw-r--  1 kotet kotet  9488 12月  7 15:33 d-keyring.gpg
drwx------ 11 kotet kotet  4096 12月  7 15:34 dmd-2.077.1
lrwxrwxrwx  1 kotet kotet     9 12月  7 15:34 dub -&gt; dub-1.6.0
drwx------  2 kotet kotet  4096 12月  7 15:34 dub-1.6.0
-rwxrwxr-x  1 kotet kotet 17443 12月  7 15:33 install.sh
</code></pre><p>さきほど言われたとおり<code>source ~/dlang/dmd-2.077.1/activate</code>を実行すると、そのターミナルに限りDのコンパイラとdubが使えるようになる。
ターミナルを終了するか<code>deactivate</code>を実行すると元に戻る。</p><pre><code class=language-console>~$ source ~/dlang/dmd-2.077.1/activate
(dmd-2.077.1)~$ which dmd
/home/kotet/dlang/dmd-2.077.1/linux/bin64/dmd
(dmd-2.077.1)~$ which dub
/home/kotet/dlang/dub/dub
(dmd-2.077.1)~$ deactivate
~$ which dmd
~$ which dub
</code></pre><h3 id=ヘルプ>ヘルプ</h3><p>ここから<code>~/dlang/install.sh</code>を使う。
<code>--help</code>で使い方がわかる。</p><pre><code class=language-console>~$ ~/dlang/install.sh --help
Usage

  install.sh [&lt;command&gt;] [&lt;args&gt;]

Commands

  install       Install a D compiler (default command)
  uninstall     Remove an installed D compiler
  list          List all installed D compilers
  update        Update this dlang script

Options

  -h --help     Show this help
  -p --path     Install location (default ~/dlang)
  -v --verbose  Verbose output

Run &quot;install.sh &lt;command&gt; --help to get help for a specific command.
If no argument are provided, the latest DMD compiler will be installed.

</code></pre><h3 id=インストール>インストール</h3><p><code>install</code>コマンドで任意のバージョンのdmd/gdc/ldcをインストールできる。
さまざまなバージョン指定方法がある。</p><pre><code class=language-console>~$ ~/dlang/install.sh install -h
Usage

  install.sh install &lt;compiler&gt;

Description

  Download and install a D compiler.
  By default the latest release of the DMD compiler is selected.

Options

  -a --activate     Only print the path to the activate script

Examples

  install.sh
  install.sh dmd
  install.sh install dmd
  install.sh install dmd-2.071.1
  install.sh install ldc-1.1.0-beta2

Compiler

  dmd|gdc|ldc           latest version of a compiler
  dmd|gdc|ldc-&lt;version&gt; specific version of a compiler (e.g. dmd-2.071.1, ldc-1.1.0-beta2)
  dmd|ldc-beta          latest beta version of a compiler
  dmd-nightly           latest dmd nightly
  dmd-2016-08-08        specific dmd nightly
</code></pre><p><code>--path</code>で場所を指定しない場合<code>~/dlang</code>下に<code>~/dlang/dmd-2.077.1</code>のようにインストールされる。</p><p>適当に<code>dmd-2.074.1</code>をインストールしてみる。</p><pre><code class=language-console>~$ ~/dlang/install.sh install dmd-2.074.1
Downloading and unpacking http://downloads.dlang.org/releases/2.x/2.074.1/dmd.2.074.1.linux.tar.xz
######################################################################## 100.0%
dub-1.6.0 already installed

Run `source ~/dlang/dmd-2.074.1/activate` in your shell to use dmd-2.074.1.
This will setup PATH, LIBRARY_PATH, LD_LIBRARY_PATH, DMD, DC, and PS1.
Run `deactivate` later on to restore your environment.
~$ source ~/dlang/dmd-2.074.1/activate
(dmd-2.074.1)~$ which dmd
/home/kotet/dlang/dmd-2.074.1/linux/bin64/dmd
(dmd-2.074.1)~$ dmd --version
DMD64 D Compiler v2.074.1
Copyright (c) 1999-2017 by Digital Mars written by Walter Bright
</code></pre><h3 id=リスト>リスト</h3><p><code>list</code>コマンドでインストール済みのコンパイラを一覧できる。</p><pre><code class=language-console>~$ ~/dlang/install.sh list
dmd-2.077.1
dmd-2.074.1
</code></pre><h3 id=アンインストール>アンインストール</h3><p><code>uninstall</code>でアンインストールできる。
<code>~/dlang/&lt;コンパイラ名&gt;</code>を削除しているだけなので手動で<code>rm</code>してもいいと思う。</p><pre><code class=language-console>~$ ~/dlang/install.sh uninstall dmd-2.074.1
Removing ~/dlang/dmd-2.074.1
</code></pre><h3 id=アップデート>アップデート</h3><p><code>update</code>でスクリプト自身の更新ができる。</p><pre><code class=language-console>~$ ~/dlang/install.sh update
Downloading https://dlang.org/install.sh
######################################################################## 100.0%
The latest version of this script was installed as ~/dlang/install.sh.
It can be used it to install further D compilers.
Run `~/dlang/install.sh --help` for usage information.
</code></pre></article><footer><h2><a href=/tags/dlang>#dlang</a>
インストールスクリプトの使い方</h2><p><time>2017-12-07</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/tech>#tech</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>