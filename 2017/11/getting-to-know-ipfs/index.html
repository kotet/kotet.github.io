<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content="この記事はBlockchain train journalの3本目の記事です。まずこちらから読み始めましょう:"><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.6966db847c42cd91179f01cb61a3829542056d57168dbf8860d9ceb7876af54c.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/d.min.js></script><script>hljs.initHighlightingOnLoad();</script><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']],
        processEscapes: true
      }
    });
</script><title>#blockchain_train_journal IPFSを理解する【翻訳】 - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2017/11/getting-to-know-ipfs/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#blockchain_train_journal IPFSを理解する【翻訳】 - Kotet's Personal Blog"><meta name=og:description content="この記事はBlockchain train journalの3本目の記事です。まずこちらから読み始めましょう:"><meta name=twitter:image content=https://blog.kotet.jp/assets/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2017/11/getting-to-know-ipfs/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.51"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><a href=/about>ABOUT</a></li><li><a href=/products>PRODUCTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/index.xml>FEED</a></li></ul></nav><h1><a href=/>KOTET'S<br>PERSONAL<br>BLOG</a></h1></header><main><header><h2><a href=/tags/blockchain_train_journal>#blockchain_train_journal</a>
IPFSを理解する【翻訳】</h2><p><time>2017-11-09</time>
<a href=/tags/blockchain_train_journal>#blockchain_train_journal</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/ipfs>#ipfs</a></p><aside><p>Table of Contents</p><nav id=TableOfContents><ul><li><ul><li><ul><li><a href=#読み込んでみましょう>読み込んでみましょう</a></li><li><a href=#ターミナルを使おう>ターミナルを使おう</a></li><li><a href=#非中央集権化-ついに進捗>非中央集権化！ついに進捗</a></li><li><a href=#ipnsによるこのブログの不変のアドレス>IPNSによるこのブログの不変のアドレス</a></li></ul></li></ul></li></ul></nav></aside></header><article><p>この記事は、
<a href=http://decentralized.blog/getting-to-know-ipfs.html>Getting to know IPFS</a>
を自分用に翻訳したものを
<a href=https://twitter.com/pors/status/925987521078743040>許可を得て</a>
公開するものである。</p><p>ソース中にコメントの形で原文を残している。
内容が理解できる程度のざっくりした翻訳であり誤字や誤訳などが多いので、気になったら
<a href=https://github.com/kotet/blog.kotet.jp>Pull request</a>だ!</p><hr><p>この記事はBlockchain train journalの3本目の記事です。
まずこちらから読み始めましょう:
<a href=/2017/11/catching-the-blockchain-train>まだ間に合うブロックチェーン【翻訳】</a></p><h3 id=読み込んでみましょう>読み込んでみましょう</h3><p>すでに前の記事で出しましたが、IPFSとそのコンテキストを理解するのに最適な記事なのでもう一度言及します:
<a href=https://ipfs.io/ipfs/QmNhFJjGcMPqpuYfxL62VVB9528NXqDNMFXiqN5bgFYiZ1/its-time-for-the-permanent-web.html>HTTP is obsolete. It&rsquo;s time for the distributed, permanent web</a></p><p>この記事からはいくつかのことがわかります(要約します):</p><ul><li>IPFSはpeer-to-peerノード(他のコンピュータと直接話すコンピュータ)のネットワークからなる</li><li>ノードはコンテンツ(任意のタイプのファイル)を保持できる</li><li>コンテンツはハッシュによって表現され、イミュータブルである(コンテンツが変化すると、ハッシュも変化する)</li><li>ノードはハッシュを使って他のノードにコンテンツを要求できる。これは素晴らしいです。ハッシュとコンテンツの間には不変の関係があります。現在のWebではURLと対応したコンテンツは変わってしまうことがあります</li><li>ノードはコンテンツのコピーを保持できる</li><li>多くのノードがコンテンツを保持するほど、コンテンツは消失しにくくなる(パーマネントWeb)</li><li>シーダーが増えるほどBitTorrentが速くなるのと同じように、このネットワークも速くなる(IPFSは一部BitTorrentプロトコルをベースにしていますが、<a href=https://www.reddit.com/r/ipfs/comments/48ab4z/why_do_people_say_ipfs_is_permanent_torrents/d0z08of/>同一のコンテンツの重複を排除するところ</a>が異なります)</li></ul><p>さらに詳しく見ていきます:</p><ul><li>コンテンツ(ファイル)はブロックに分割され、各ブロックにハッシュが与えられる</li><li>内容が同じなのにハッシュが異なる重複したブロックはネットワークから削除される</li><li>IPFSにはコンテンツのハッシュを指すディレクトリの概念がある</li><li>ブロックによりGitのようなバージョン管理ができる</li><li>IPNSによりコンテンツの最新版を探すことができる</li><li>IPNSにより誰もがコンテンツへのユニークなパブリックリンクを作ることができる</li><li>IPFSハッシュはバージョンに関係なくイミュータブルなコンテンツへのポインタとなる。IPNSアドレスはそのアドレスの作者が決めたファイルやディレクトリへのポインタである</li><li>IPNSアドレスはBitcoinウォレットのパブリックアドレスと同じpubkeyhashとして実装されている</li><li>IPNSアドレスは長く醜いし、ブラウザはIPFSに対応していない。これを解決する方法がいくつかあるので後に見ていく</li></ul><p>IPFSについてもっと知るのに、GitHubの<a href=https://github.com/ipfs/ipfs>ipfs/ipfs</a>は良い開始地点でしょう。 <a href=https://github.com/ipfs/ipfs#quick-summary>quick summary</a>を見てください。</p><p>抽象的なところは大体わかったので、早速始めましょう。</p><h3 id=ターミナルを使おう>ターミナルを使おう</h3><p>私たちには少し行動を始めるための知識がついています。</p><p>まず<a href=https://ipfs.io/docs/install>インストール</a>し（ipfs-updateを使うやり方をおすすめします）、<a href=https://ipfs.io/docs/getting-started/>getting started</a>に従いましょう。</p><p>ブログを非中央集権化する最初の一歩を踏み出す時です。
ところで、このサイトのドメインは素晴らしいと思いませんか！ええ、あなたが中央集権バージョンを読んでいる間までの話ですが :)</p><p>私は静的に生成したウェブサイトを私のサーバーにアップロードしており、それはこのようなものです:</p><pre><code>├── archives.html
├── author
│   └── mark-pors.html
├── authors.html
├── catching-the-blockchain-train.html
├── categories.html
├── category
│   └── blockchain-train-journal.html
├── feeds
│   ├── all.atom.xml
│   └── blockchain-train-journal.atom.xml
├── getting-to-know-ipfs.html
├── index.html
├── picking-a-decentralized-storage-system.html
├── tags.html
└── theme
    ├── css
     ... // ...
            └── youtube.png
</code></pre><p>ファイルを惑星間ファイルシステムに向けて打ち上げるには、このようにします:</p><pre><code class=language-console>$ ipfs init # これはノードのピアIDを生成します
$ ipfs daemon # ローカルノードを開始します
$ ipfs add catching-the-blockchain-train.html
added QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4 catching-the-blockchain-train.html
</code></pre><p>私のノードはこのファイルを配信できるようになり、ネットワークに向けて誰かが以下のハッシュを要求した場合に利用できるコンテンツ（私の最初のブログポストです！）があると発信します:</p><p><code>QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4</code></p><p>あなたのターミナルで:</p><pre><code class=language-console>ipfs cat QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4
</code></pre><p>は以下と同じ結果を返します（もちろん私がファイルをHTTPでホストしている間に限った話です）:</p><pre><code class=language-console>curl http://decentralized.blog/catching-the-blockchain-train.html
</code></pre><p>あなたのこのファイルをIPFSで2度リクエストした場合、結果は非常に早く返ってきます。
これはノードがコンテンツのコピーをローカルに保つためです。
クールでしょう？</p><p>IPFSノードにはHTTPゲートウェイが付属しているため、ブラウザからもファイルにアクセスできます: <a href=http://decentralized.blog:8080/ipfs/QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4>http://decentralized.blog:8080/ipfs/QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4</a></p><p>このようなことが起きています（getting startedより）:</p><blockquote><p>ゲートウェイはあなたのコンピュータからファイルを配信します。
ゲートウェイはDHTにクエリを投げ、あなたのマシンを見つけ、ファイルを要求し、あなたのマシンはゲートウェイにそれを送り、ゲートウェイはあなたのブラウザにそのファイルを送ります。</p></blockquote><p>Note: これは明らかに中央サーバがありますが、少なくともゲートウェイは誰でも実行が可能です。
なのでこれは非中央集権の一種です。
あとでより良い何かが必要でしょう。</p><h3 id=非中央集権化-ついに進捗>非中央集権化！ついに進捗</h3><p>Webサイト全体を惑星間ファイルシステムにプッシュするのはこれ以上ないほど簡単で、<code>-r</code>フラグをつけてすべての静的ファイルを含むディレクトリを指定するだけです。</p><pre><code class=language-console>$ ipfs add -r ../../www/dcb
added QmWu4hsywXoSrw5JRhjUadyMnDuxuvcgExwVD62cWeLVjb dcb/archives.html
added QmUCJ6z2EfikXEDUYbxfjdkrX2zw62XCAM93HHC61Qrmwg dcb/author/mark-pors.html
added QmV13vUiKU64oHoxbp5MN7bnehraW46de82PLvndbisn64 dcb/authors.html
added QmXyZcrThrfWQSTKzPiNT4Nd2RcqcVQ3tr7rmFqHYZ3fq4 dcb/catching-the-blockchain-train.html
added QmRiWHfYLQEJoKz2dDq2sXnW2keiKZG1nHbnaN55TTXN8b dcb/categories.html
added QmSCx2eV3BjHJWoXMBc7rKakPv3fAcewyroFCRmovcsYSy dcb/category/blockchain-train-journal.html
added QmVxVLT22KLGasBLxzSv6yXofx3GVXmWEd3HqSjPp1X6Zz dcb/feeds/all.atom.xml
added QmdKJY5VVd8Qm5xsLt8Vj5XwvTbe5mCQhK6DnZ9LkqTHwz dcb/feeds/blockchain-train-journal.atom.xml
added QmYpyQ3MXYZum3q2E9pRxUWnJXK74cLvFbuMDYukK9ivK1 dcb/index.html
added QmXkfv9ZXb9evxPXTMJC8fvgeZymYpTQo3CVFv7mDoSRTN dcb/picking-a-decentralized-storage-system.html
added QmSyuSjmzhwkoj6qH7s4MmKeB98Ub1DZ1Hm5anBBnR9yVu dcb/tags.html
added QmSfLETTMQc1b9cBJENH1S4NK5qniXSf79KSP8h5CbU3U8 dcb/theme/css/main.css
... // ...
added QmU8CmEYWV5aUuqoToq1xiyqftdY8MHQ8MdViA2ex23uyV dcb/theme/images/icons/youtube.png
added QmYBVeJkBRdJYj8jr3YTGWE537h26YqcfjvbX4ttjZ65X2 dcb/author
added QmPwQPX86RQi6MrZQigh2tWgztcbf46EjhRg1hzMzELvHN dcb/category
added QmfRxCPp417G3NTqEpBmwtGwtUKFzgQjBRvxNBq88HhC9F dcb/feeds
added QmYUnPcDPcnKA3WFembvNYG48m1oUWa7QLNWZxrkLv1vcE dcb/theme/css
added QmfBq8BDXxhu9cLAG4qhxqY6K5xDQCBWyoYqX5fTmQbfwW dcb/theme/images/icons
added Qme4Dt6vQ1eAVcEs7dY55cAMhTsRJxTakANhZjX9EKvGfF dcb/theme/images
added QmciTMAUiEqMpar2u9n1dJNJStmrP6fjMESyH6ZS5eo56H dcb/theme
added QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ dcb
</code></pre><p>Note: 私は最初シンボリックリンクをネットワークに追加しようとして失敗しました。</p><p><code>dcb/catching-the-blockchain-train.html</code>のハッシュは先程のものと同じです。これが重複排除です。</p><p>このリストから1番下のハッシュを取ってゲートウェイに送ると、ブログが閲覧できます:
<a href=http://decentralized.blog:8080/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/>http://decentralized.blog:8080/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/</a>
すべての相対リンクはちゃんと動作します。
素晴らしい！</p><p>私のゲートウェイがダウンしている場合は、IPFSが提供しているもの: <a href=https://gateway.ipfs.io/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/>https://gateway.ipfs.io/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/</a>
またはあなたのローカルゲートウェイ:
<a href=http://127.0.0.1:8080/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/>http://127.0.0.1:8080/ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ/</a>
を使ってみてください。
まさにクールでしょう？</p><p>ちょっと問題があります:
これはこのブログの古いバージョンです。
私はこの記事を書いてアップロードしている途中であり、アップロードするとハッシュが変わり、そのハッシュは最新の記事には含まれることがないからです……</p><p>解決方法はあります:</p><h3 id=ipnsによるこのブログの不変のアドレス>IPNSによるこのブログの不変のアドレス</h3><p>IPNSの使い方はこちらで説明されています:
<a href=https://ipfs.io/ipfs/QmNZiPk974vDsPmQii3YbrMKfi12KTSNM7XMiYyiea4VYZ/example#/ipfs/QmP8WUPq2braGQ8iZjJ6w9di6mzgoTWyRLayrMRjjDoyGr/ipns/readme.md>The Inter-Planetary Naming System</a></p><p>私たちの、ノードが自分のサーバーで動いているケースでは、このようにします:</p><pre><code class=language-console>$ ipfs name publish QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ
Published to QmRf4ERGvYpVo6HRa2VueZT8pWi8YvyLS3rW6ad2y83tdN: /ipfs/QmcPx9ZQboyHw8T7Afe4DbWFcJYocef5Pe4H3u7eK1osnQ
</code></pre><p>このブログのアドレスは変化しません:
<code>QmRf4ERGvYpVo6HRa2VueZT8pWi8YvyLS3rW6ad2y83tdN</code></p><p>このアドレスは（私が先ほどのように実行した場合）静的ファイルを含むディレクトリを指し示します（index.htmlがそのディレクトリにある場合それが配信されます）。</p><p>あなたがこれを読んでいる時も、アドレス<code>QmRf4ERGvYpVo6HRa2VueZT8pWi8YvyLS3rW6ad2y83tdN</code>はまだホームページアドレスですが、コンテンツは新しいものになっています（記事を書いたら<code>publish</code>しなおします）。</p><p>こうして、私たちの静的ブログは非中央集権化され、<a href=http://decentralized.blog:8080/ipns/QmRf4ERGvYpVo6HRa2VueZT8pWi8YvyLS3rW6ad2y83tdN/>http://decentralized.blog:8080/ipns/QmRf4ERGvYpVo6HRa2VueZT8pWi8YvyLS3rW6ad2y83tdN/</a>で利用できるようになりました。
今度は<code>ipfs</code>のかわりに<code>ipns</code>となっていることに注意してください。</p><p>IPFSは超クールであり、人生をより簡単にします。
ブログを改善する前に、ちょっとIPFS（とIPNS）の内部動作について見ていきたいです。</p></article><footer><h2><a href=/tags/blockchain_train_journal>#blockchain_train_journal</a>
IPFSを理解する【翻訳】</h2><p><time>2017-11-09</time>
<a href=/tags/blockchain_train_journal>#blockchain_train_journal</a> <a href=/tags/tech>#tech</a> <a href=/tags/translation>#translation</a> <a href=/tags/ipfs>#ipfs</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>