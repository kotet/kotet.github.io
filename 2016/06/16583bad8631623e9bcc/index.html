<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=description content=DでOpenGLとかそういうのが使いたくなったので練習をした。Dubを使って環境構築した記事がなかなか見つからなかったのでまとめ記事を書く。><link rel=stylesheet href=https://blog.kotet.jp/sass/single.min.3eeaf6ed1df267da88773748526a6bec7420ca30786c65a9be234645937d638d.css><script defer src="//cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script><script type=text/x-mathjax-config>
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        displayMath: [['$$','$$']],
        processEscapes: true
      }
    });
</script><title>#dlang OpenGL/GLFWはじめての人がD言語でウィンドウを表示するまで - Kotet&#39;s Personal Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://blog.kotet.jp/2016/06/16583bad8631623e9bcc/><link rel=icon href=/favicon.ico><meta name=twitter:card content=summary><meta name=og:title content="#dlang OpenGL/GLFWはじめての人がD言語でウィンドウを表示するまで - Kotet's Personal Blog"><meta name=og:description content=DでOpenGLとかそういうのが使いたくなったので練習をした。Dubを使って環境構築した記事がなかなか見つからなかったのでまとめ記事を書く。><meta name=twitter:image content=https://blog.kotet.jp/assets/logo.png><meta name=twitter:url content=https://blog.kotet.jp/2016/06/16583bad8631623e9bcc/><meta name=twitter:site content=@kotetttt><meta name=twitter:creator content=@kotetttt><meta name=generator content="Hugo 0.49"><script defer src="//www.googletagmanager.com/gtag/js?id=UA-88180620-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-88180620-1');</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8443812672116269",enable_page_level_ads:true});</script></head><body><header class=site><nav><ul><li><a href=/about>ABOUT</a></li><li><a href=/products>PRODUCTS</a></li><li><a href=/tags>TAGS</a></li><li><a href=/index.xml>FEED</a></li></ul></nav><h1><a href=/>KOTET'S PERSONAL BLOG</a></h1></header><main><header><h2><a href=/tags/dlang>#dlang</a>
OpenGL/GLFWはじめての人がD言語でウィンドウを表示するまで</h2><p><time>2016-06-28</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/qiita>#qiita</a> <a href=/tags/tech>#tech</a></p><div style="border:1em solid #b8860b;padding-left:1em;margin-bottom:1em"><p style=font-weight:700>これは1年以上前の記事です</p><p>ここに書かれている情報、見解は現在のものとは異なっている場合があります。</p></div><aside><p>Table of Contents</p><nav id=TableOfContents><ul><li><a href=#openglとglfwの導入>OpenGLとGLFWの導入</a><ul><li><ul><li><ul><li><a href=#エラー>エラー</a></li><li><a href=#cmakelists-txt>CMakeLists.txt</a></li></ul></li></ul></li></ul></li><li><a href=#プロジェクトを作る>プロジェクトを作る</a></li><li><a href=#テスト>テスト</a><ul><li><ul><li><ul><li><a href=#source-app-d>source/app.d</a></li></ul></li></ul></li></ul></li></ul></nav></aside></header><article><p>この記事はQiitaに投稿されたものの転載です。</p><hr><p>DでOpenGLとかそういうのが使いたくなったので練習をした。<br>Dubを使って環境構築した記事がなかなか見つからなかったのでまとめ記事を書く。<br>Ubuntu 16.04 LTS。</p><h1 id=openglとglfwの導入>OpenGLとGLFWの導入</h1><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console>OpenGL
$sudo apt install mesa-utils

GLFW
$sudo apt install xorg-dev
$git clone https://github.com/glfw/glfw.git
$cd glfw</code></pre></div><p><a href=http://qiita.com/maueki/items/9d1e241cdd345220fc1b>ここで共有ライブラリを作るようにCMakeLists.txtを書き換える。</a><br>でないと実行時にこうなる。</p><h4 id=エラー>エラー</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console>libglfw3.so - libglfw3.so: cannot open shared object file: No such file or directory
libglfw.so.3 - libglfw.so.3: cannot open shared object file: No such file or directory</code></pre></div><h4 id=cmakelists-txt>CMakeLists.txt</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff><span style=color:#f92672>-option(BUILD_SHARED_LIBS &#34;Build shared libraries&#34; OFF)
</span><span style=color:#f92672></span><span style=color:#a6e22e>+option(BUILD_SHARED_LIBS &#34;Build shared libraries&#34; ON)
</span><span style=color:#a6e22e></span></code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console>$cmake .
$make
$sudo make install
-- Installing: /usr/local/lib/libglfw.so.3
-- Installing: /usr/local/lib/libglfw.so</code></pre></div><h1 id=プロジェクトを作る>プロジェクトを作る</h1><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console>$dub init PROJECTNAME derelict-gl3 derelict-glfw3</code></pre></div><p>以前は<a href=https://github.com/mdparker/Derelict3>一つのリポジトリにすべてが入っていた</a>ようだが、<a href=https://github.com/DerelictOrg>今はバラになっていた。</a></p><h1 id=テスト>テスト</h1><p><a href=https://trap.tokyotech.org/blog/2015/12/d%E8%A8%80%E8%AA%9E%E3%81%A7opengl%E2%80%A0%E5%85%A5%E9%96%80%E2%80%A0/>参考元</a></p><h4 id=source-app-d>source/app.d</h4><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-d data-lang=d>import derelict.opengl3.gl;
import derelict.glfw3.glfw3;

void main()
{
    //Derelictの初期化。この下からOpenGLやGLFWのいろいろが使えるようになる。
    DerelictGL.load();
    DerelictGLFW3.load();

    glfwInit();

    GLFWwindow *window = glfwCreateWindow(100, 100, &#34;test&#34;, null, null);
    
    glfwMakeContextCurrent(window);

    while(!glfwWindowShouldClose(window))
    {
        glClear(GL_COLOR_BUFFER_BIT);

        glEnd();
        glfwSwapBuffers(window);

        glfwPollEvents();
    }

    glfwTerminate();
}</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console>$dub run</code></pre></div><p><img src=/assets/qiita/0/57768/47c378ea-ccb1-ec6f-2d69-8e01b1cde3fa.png alt=gltest.png></p><p>うまくいけばこんな感じの小さなウィンドウが出てくる。</p></article><footer><h2><a href=/tags/dlang>#dlang</a>
OpenGL/GLFWはじめての人がD言語でウィンドウを表示するまで</h2><p><time>2016-06-28</time>
<a href=/tags/dlang>#dlang</a> <a href=/tags/qiita>#qiita</a> <a href=/tags/tech>#tech</a></p></footer><div class=ad-wrapper><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-8443812672116269 data-ad-slot=2914874272 data-ad-format=horizontal data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script></div></main><footer class=site></footer></body></html>